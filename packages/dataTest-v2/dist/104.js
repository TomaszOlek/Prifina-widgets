"use strict";(self.webpackChunk_prifina_widgets_dataTest_v2=self.webpackChunk_prifina_widgets_dataTest_v2||[]).push([[104],{104:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(416),o=n.n(r),l=n(988),a=n(385),i=n(522),u=n(447),c=n(141),s=n(740),f=n(230);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t,n,r,o,l,a){try{var i=e[l](a),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var l=e.apply(t,n);function a(e){m(l,r,o,a,i,"next",e)}function i(e){m(l,r,o,a,i,"throw",e)}a(void 0)}))}}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,l=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(47);var b=l.ZP.div.withConfig({displayName:"App__Container",componentId:"sc-1k2b6g5-0"})(["height:300px;font-size:14px;width:300px;padding:5px;"]),E=function(e){e.data,console.log("WIDGET V2 ",a.usePrifina,d(a.usePrifina),a.PrifinaContext),console.log("WIDGET V2.. ",(0,a.usePrifina)());var t=(0,a.usePrifina)(),n=t.check,l=t.onUpdate,m=t.API,v=t.registerDataConnector,E=g((0,r.useState)([]),2),h=E[0],S=E[1],k=g((0,r.useState)(""),2),A=k[0],O=k[1],w=g((0,r.useState)("eq"),2),T=w[0],C=w[1],P=g((0,r.useState)(""),2),x=P[0],D=P[1],F=g((0,r.useState)(""),2),_=F[0],U=F[1],I=function(e){var t=g((0,r.useState)(null),2),n=t[0],o=t[1],l=g((0,r.useState)(null),2),a=l[0],i=l[1],u=g((0,r.useState)(null),2),c=u[0],s=u[1],f=g((0,r.useState)(null),2),p=f[0],m=f[1];return(0,r.useEffect)((function(){p&&(s(!0),o(null),i(null),fetch(p).then((function(e){return e.text()})).then((function(e){s(!1),e.code>=400?i(e.message):o(e)})).catch((function(e){s(!1),i(e)})))}),[p]),{s3Data:n,error:a,isLoading:c,setUrl:m}}(),j=I.s3Data,G=(I.error,I.isLoading),N=I.setUrl,Z=function(e){console.log("WIDGET UPDATE ",(new Date).getTime(),e),console.log(" UPDATE ",Object.keys(e)),e.data.hasOwnProperty("content")&&e.data.content.hasOwnProperty("s3Url")&&(console.log("GET ",e.data.content.s3Url),N(e.data.content.s3Url))};return(0,r.useEffect)((function(){if(console.log("NEW DATA ",G,j),!G&&j){var e=j.replace(/\"/g,"").split("\n");console.log(e)}}),[G,j]),(0,r.useEffect)((function(){console.log("CONNECTORS ",u.Z),console.log("CHECK ",n()),l(f.A,Z),v(f.A,[i.Z,u.Z,c.Z,s.Z]);var e=Object.keys(m[f.A].Fitbit).map((function(e){return"Fitbit."+e})),t=Object.keys(m[f.A].Oura).map((function(e){return"Oura."+e})),r=Object.keys(m[f.A].Garmin).map((function(e){return"Garmin."+e})),o=Object.keys(m[f.A].GoogleTimeline).map((function(e){return"GoogleTimeline."+e}));S(h.concat(e,t,r,o))}),[]),o().createElement(b,null,o().createElement("div",null,"Testing 2"),o().createElement("div",null,o().createElement("select",{onChange:function(e){return O(e.target.value)},defaultValue:A},h.map((function(e,t){return o().createElement("option",{key:"f-"+t,value:e},e)})))),o().createElement("div",null,o().createElement("select",{onChange:function(e){return C(e.target.value)},defaultValue:T},o().createElement("option",{value:"eq"},Symbol.keyFor(a.Op.eq)),o().createElement("option",{value:"ne"},Symbol.keyFor(a.Op.ne)),o().createElement("option",{value:"gte"},Symbol.keyFor(a.Op.gte)),o().createElement("option",{value:"gt"},Symbol.keyFor(a.Op.gt)),o().createElement("option",{value:"lte"},Symbol.keyFor(a.Op.lte)),o().createElement("option",{value:"lt"},Symbol.keyFor(a.Op.lt)),o().createElement("option",{value:"like"},Symbol.keyFor(a.Op.like)),o().createElement("option",{value:"in"},Symbol.keyFor(a.Op.in)),o().createElement("option",{value:"between"},Symbol.keyFor(a.Op.between)))),o().createElement("div",null,o().createElement("input",{type:"text",onChange:function(e){return D(e.target.value)}})),o().createElement("div",null,o().createElement("input",{type:"text",onChange:function(e){return U(e.target.value)}})),o().createElement("div",null,o().createElement("button",{onClick:y(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p({},"s3::date",p({},a.Op[T],x)),console.log("FILTER",t),n=null,""!==_&&(n=_),r=A.split("."),console.log(r),e.next=8,m[f.A][r[0]][r[1]]({filter:t,fields:n});case 8:o=e.sent,console.log("DATA ",(new Date).getTime(),o);case 10:case"end":return e.stop()}}),e)})))},"RUN")))};E.displayName="App",E.__docgenInfo={description:"",methods:[],displayName:"App"};const h=E},230:(e,t,n)=>{n.d(t,{A:()=>r});var r="x866fscSq5Ae7bPgUtb6ffB"}}]);