"use strict";(self.webpackChunk_prifina_widgets_weather_v2=self.webpackChunk_prifina_widgets_weather_v2||[]).push([[104],{3104:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var c=n(8416),a=n.n(c),o=n(101),r=n(8385),i=n(6262),l=n(6827),s=n(1506),d=n(7956),g=n(7284),u=n(3528),m=n(3987),f=n(2230);const h={width:"300px",height:"300px",borderRadius:"10px",boxShadow:"0px 2px 8px rgba(91, 92, 91, 0.2)",paddingTop:31,flexDirection:"column",justifyContent:"space-between"},p=e=>{console.log("WEATHER WIDGET PROPS ",e);const[t,n]=(0,c.useState)(!0),{city:p,data:E}=e,{onUpdate:x}=(0,r.usePrifina)();let w=p;void 0!==E&&E.hasOwnProperty("settings")&&"object"==typeof E.settings&&E.settings.hasOwnProperty("city")&&E.settings.city.length>0&&(w=E.settings.city);const[y,D]=(0,c.useState)(w),C=e=>{e.hasOwnProperty("settings")&&"object"==typeof e.settings&&e.settings.hasOwnProperty("city")&&(D(e.settings.city),b(`${i.C}/v1/forecast.json?key=${i.$}&q=${e.settings.city}&days=3&aqi=no&alerts=no`))};(0,c.useEffect)((()=>{x(f.A,C)}),[]);const{weatherData:S,error:k,isLoading:A,setUrl:b}=(0,o.Z)(`${i.C}/v1/forecast.json?key=${i.$}&q=${y}&days=3&aqi=no&alerts=no`);if(k)return a().createElement("h2",null,"Error when fetching: ",k);if(!S&&A)return a().createElement("h2",null,"LOADING...");if(!S)return null;const v=S.current.condition.text,I=S.current.is_day,_=S.location.localtime;new Date(_).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});const z=I<1?"linear-gradient(180deg, #2B5876 0%, #4E4376 100%)":"linear-gradient(180deg, #A9E8FC 0%, #2774D2 100%)",O=I<1?"linear-gradient(180deg, #A6BED0 0%, #1C242C 100%)":" linear-gradient(180deg, #C4E0E5 0%, #58A8C5 30.73%, #2571A4 88.54%)",W=I<1?"linear-gradient(180deg, #223548 16.17%, #166293 100%)":"linear-gradient(180deg, #D2DEEA 0%, #00416A 100%)",L=I<1?"linear-gradient(180deg, #808080 0%, #191654 100%)":"linear-gradient(180deg, #F2FCFE 0%, #1C92D2 100%)",T=S.current.condition.code;console.log("CONDITION CODE",T);let $=(0,m.H)(T),j=z;switch(T){case 1e3:case 1003:case 1006:default:j=z;break;case 1009:case 1063:case 1192:case 1183:case 1186:case 1189:case 1153:case 1195:j=O;break;case 1273:case 1246:case 1276:case 1087:case 1279:case 1282:j=W;break;case 1030:case 1066:case 1069:case 1072:case 1114:case 1117:case 1135:case 1147:case 1150:case 1168:case 1171:case 1180:case 1198:case 1201:case 1204:case 1207:case 1210:case 1213:case 1216:case 1219:case 1222:case 1225:case 1237:case 1240:case 1243:case 1249:case 1252:case 1255:case 1258:case 1261:case 1264:j=L}return I<1&&($=(0,m.$)(T)),a().createElement(d.xjn,{resetCSS:!1},!1===A&&a().createElement(l.kC,{alt:"container",style:h,flex:1,bg:j},(()=>{if(k)return a().createElement("h2",null,"Error when fetching: ",k);if(!S&&A)return a().createElement("h2",null,"LOADING...");if(!S)return null;console.log("WEATHER DATA",S);const e=S.current.temp_c,t=S.location.name,n=1e3*S.location.localtime_epoch,c=new Date(n).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return console.log(c),a().createElement(l.kC,null,a().createElement(l.kC,{paddingLeft:"20px",paddingRight:"17px"},a().createElement(s.Ee,{src:$,boxSize:"100px"})),a().createElement(l.kC,{flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},a().createElement(l.kC,{alt:"location",justifyContent:"center"},a().createElement(g._t,null),a().createElement(l.xv,{fontSize:"14px",fontWeight:"400",color:"white"},t)),a().createElement(l.kC,{alt:"location",alignItems:"baseline"},a().createElement(l.xv,{paddingRight:"3px",fontWeight:"600",fontSize:"24px",color:"white"},Math.round(e),"°"),a().createElement(l.xv,{fontWeight:"600",fontSize:"16px",color:"white"},v)),a().createElement(l.xv,{fontSize:"14px",fontWeight:"400",color:"white"},c)))})(),(()=>{if(k)return a().createElement("h2",null,"Error when fetching: ",k);if(!S&&A)return a().createElement("h2",null,"LOADING...");if(!S)return null;console.log("WEATHER DATA",S);const e=S.location.localtime;let c=new Date(e).getHours();console.log("sdadsasda",c);const o=[...S.forecast.forecastday[0].hour,...S.forecast.forecastday[1].hour],r=o.slice(c,c+6),i=o.slice(c+6,c+12);console.log("HOUR DATA",o),console.log("SIX HOUR DATA",r),console.log("SIX HOUR 2 DATA",i);const d=t?r:i;return t?a().createElement(l.kC,{paddingLeft:"41px",paddingRight:"20px",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},d.map((function(e,t){const n=1===I?(0,m.H)(e.condition.code):(0,m.$)(e.condition.code),c=new Date(e.time).toLocaleString("en-US",{hour:"numeric",hour12:!0});return a().createElement(l.kC,{key:"data-"+t,flexDirection:"column",alignItems:"center"},a().createElement(l.xv,{fontSize:"10px",fontWeight:"600",color:"white"},c),a().createElement(s.Ee,{src:n,boxSize:"22px"}),a().createElement(l.xv,{key:t,fontSize:"12px",fontWeight:"600",color:"white"},Math.round(e.temp_c)))})),a().createElement("div",{onClick:()=>n(!t)},a().createElement(g._Q,null))):a().createElement(l.kC,{paddingLeft:"20px",paddingRight:"20px",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},a().createElement("div",{onClick:()=>n(!t)},a().createElement(g.s$,null)),d.map((function(e,t){const n=1===I?(0,m.H)(e.condition.code):(0,m.$)(e.condition.code),c=new Date(e.time).toLocaleString("en-US",{hour:"numeric",hour12:!0});return a().createElement(l.kC,{key:"wdata-"+t,flexDirection:"column",alignItems:"center"},a().createElement(l.xv,{fontSize:"10px",fontWeight:"600",color:"white"},c),a().createElement(s.Ee,{src:n,boxSize:"22px"}),a().createElement(l.xv,{key:t,fontSize:"12px",fontWeight:"600",color:"white"},Math.round(e.temp_c)))})),a().createElement("div",null,a().createElement(g._Q,null)))})(),(()=>{if(k)return a().createElement("h2",null,"Error when fetching: ",k);if(!S&&A)return a().createElement("h2",null,"LOADING...");if(!S)return null;const e=S.forecast.forecastday,t=e[1].date,n=e[2].date,c=(new Date(t),new Date(n)),o=u.a[c.getDay()],r=new Date(t),i=new Date(n),d=r.getDate(),g=u.e[r.getMonth()],f=i.getDate(),h=u.e[i.getMonth()];console.log("Three day DATA",e);const p=1===I?(0,m.H)(e[1].day.condition.code):(0,m.$)(e[1].day.condition.code),E=1===I?(0,m.H)(e[2].day.condition.code):(0,m.$)(e[2].day.condition.code);console.log("ICON",p),console.log("IS LOADING",A);const x=e[1].day.mintemp_c,w=e[1].day.maxtemp_c,y=e[2].day.mintemp_c,D=e[2].day.maxtemp_c;return a().createElement(l.kC,{paddingLeft:"20px",paddingRight:"20px",marginBottom:"28px",justifyContent:"space-between"},a().createElement(l.kC,{flexDirection:"column"},a().createElement(l.xv,{fontSize:"14px",fontWeight:"600",color:"white"},"Tomorrow, ",d," ",g),a().createElement(l.xv,{fontSize:"14px",fontWeight:"600",color:"white"},o,", ",f," ",h)),a().createElement(l.kC,{alignItems:"center",justifyContent:"space-between",flexDirection:"column"},a().createElement(s.Ee,{src:E,boxSize:"22px"}),a().createElement(s.Ee,{src:p,boxSize:"22px"})),a().createElement(l.kC,{alignItems:"center",justifyContent:"space-between",flexDirection:"column"},a().createElement(l.xv,{fontSize:"14px",fontWeight:"600",color:"white"},Math.round(x),"°/ ",Math.round(w),"°"),a().createElement(l.xv,{fontSize:"14px",fontWeight:"600",color:"white"},Math.round(y),"°/ ",Math.round(D),"°")))})()))};p.defaultProps={city:"San Francisco"},p.displayName="Weather";const E=p}}]);