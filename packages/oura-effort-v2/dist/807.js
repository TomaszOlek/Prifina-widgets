"use strict";(self.webpackChunk_prifina_widgets_oura_effort_v2=self.webpackChunk_prifina_widgets_oura_effort_v2||[]).push([[807],{4807:(e,t,M)=>{M.r(t);var n=M(6470),a=M(1119),r=M(513),D=M(7162),N=M.n(D),i=(M(8695),M(8188),M(4083),M(8995),M(9120),M(3105),M(5713),M(1939),M(1245),M(3108),M(7900)),g=M.n(i),u=M(4149),o=M(2734),j="iGypDtJmrX9p9eTGryhobr",c=M(3280),I=M(6827),z=M(8703),s=M(3258),y=M(6641),A=M(2655),l=M(1573),L=M(5556),d=M(3131),T=u.ZP.div.withConfig({displayName:"App__Container",componentId:"sc-egsxrj-0"})(["height:300px;width:300px;border-radius:10px;background:linear-gradient(180deg,#343434 0%,#d3bc69 149.83%);padding:11px 8px 0px 8px;"]),E=function(e){var t=(0,o.usePrifina)(),M=t.stage,D=(t.check,t.onUpdate),u=t.API,E=t.registerDataConnector,x=(0,i.useState)([]),m=(0,r.Z)(x,2),S=m[0],O=m[1],p=(0,i.useState)(6),k=(0,r.Z)(p,2),h=k[0],w=k[1],U=(0,i.useState)(),f=(0,r.Z)(U,2),Q=f[0],Y=f[1],v=(0,i.useRef)(),C=function(e){console.log("ORIGINAL PROCESS ASYNC DATA",e);var t=e,n="summary_date,inactive,low,medium,high,score".split(","),r=[];if("dev"===M){var D=t[0].split("\t"),N=t[1].split("\t"),i=[];n.forEach((function(e){var t=D.indexOf(e);t>-1&&i.push(N[t])}));var g={summary_date:i[0],inactive:parseInt(i[1]),low:parseInt(i[2]),medium:parseInt(i[3]),high:parseInt(i[4]),score:parseInt(i[5])},u=new Date(g.summary_date);r.push(g);for(var o=0;o<h;o++){var j=u.setDate(u.getDate()-1),c=Object.assign({},g);c.summary_date=new Date(j).toISOString().split("T")[0],r.push(c),u=new Date(j)}console.log("new data",r)}else t.shift(),t.forEach((function(e){var t,M=e.split("\t");r.push((t={},(0,a.Z)(t,n[0],M[0]),(0,a.Z)(t,n[1],Number(M[1])),(0,a.Z)(t,n[2],Number(M[2])),(0,a.Z)(t,n[3],Number(M[3])),(0,a.Z)(t,n[4],Number(M[4])),(0,a.Z)(t,n[5],Number(M[5])),t))}));O(r),console.log("process result",r);var I=r.reduce((function(e,t){return e+t.score/r.length}),0);Y(Math.ceil(I))};console.log("processed async data",S);var b=function(){var e=(0,n.Z)(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("UPDATE ",t),t.hasOwnProperty("data")&&t.data.hasOwnProperty("content")&&("Oura/queryActivitySummariesAsync"===t.data.dataconnector&&t.data.content.length>1&&C(t.data.content),console.log("PAYLOAD DATA",t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){function e(){return(e=(0,n.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(j,b),E(j,[c.Z]),v.current=!0;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}v.current||function(){e.apply(this,arguments)}()}),[]),(0,i.useEffect)((function(){function e(){return(e=(0,n.Z)(N().mark((function e(){var t,n,r,D,i;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,n=t.setDate(t.getDate()-h),r=new Date(n).toISOString().split("T")[0],D=(0,a.Z)({},"s3::date",(0,a.Z)({},o.Op.gte,r)),console.log("ASYNC FILTER",D),e.next=7,u[j].Oura.queryActivitySummariesAsync({filter:D,fields:"summary_date,inactive,low,medium,high,score"});case 7:i=e.sent,"dev"===M&&(console.log("async result",i),C(i.data.getDataObject.content));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[h]),console.log("period",h),g().createElement(T,null,g().createElement(I.kC,{alignItems:"center",mb:21},g().createElement(I.xv,{fontSize:16,color:"white",fontWeight:700,ml:9,mr:110},"Effort widget"),g().createElement(z.Ee,{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAzOCAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIuODc1IDEuMjU0MjdDMi44NzUgMS43MDM5OCAzLjQgMS44MTY0MSA1LjMxMjUgMS44MTY0MUM3LjIyNSAxLjgxNjQxIDcuNzUgMS43MDM5OCA3Ljc1IDEuMjU0MjdDNy43NSAwLjgwNDU1NiA3LjIyNSAwLjY5MjEyOCA1LjMxMjUgMC42OTIxMjhDMy40IDAuNjkyMTI4IDIuODc1IDAuODA0NTU2IDIuODc1IDEuMjU0MjdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMi44MDAzNyAzLjUzOTc5Qy0wLjA4NzEzNDggNS4wNzYzMSAtMC4wMTIxMzQ4IDkuODczMjMgMi44NzUzNyAxMS4zNzIzQzQuMzAwMzcgMTIuMTIxOCA2Ljc3NTM3IDEyLjA4NDMgNy45NzUzNyAxMS4zMzQ4QzEwLjcxMjkgOS40OTg0NyAxMC42MDA0IDQuOTYzODggNy43NTAzNyAzLjUwMjMyQzYuMzYyODcgMi43OTAyNyA0LjExMjg3IDIuNzkwMjcgMi44MDAzNyAzLjUzOTc5Wk03LjAwMDM3IDQuMjUxODNDOC4zNTAzNyA0Ljk2Mzg4IDguODc1MzcgNS44NjMzIDguODc1MzcgNy41MTIyNEM4Ljg3NTM3IDkuMDg2MjMgOC4xMjUzNyAxMC4yMTA1IDYuNjYyODcgMTAuODEwMUM0LjMzNzg3IDExLjc0NyAxLjc1MDM3IDEwLjA2MDYgMS43NTAzNyA3LjYyNDY3QzEuNzUwMzcgNS45MDA3OCAyLjIzNzg3IDQuOTYzODggMy41NTAzNyA0LjI4OTMxQzQuODYyODcgMy41NzcyNyA1LjY1MDM3IDMuNTM5NzkgNy4wMDAzNyA0LjI1MTgzWiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTEwLjc1IDUuNTYzNjZDMTAuNzUgMTAuMDYwOCAxMi4wNjI1IDExLjkzNDYgMTUuMjUgMTEuOTM0NkMxNi42NzUgMTEuOTM0NiAxNy4xNjI1IDExLjc0NzIgMTguMDI1IDEwLjg0NzhDMTkgOS44MzU5MiAxOS4xMTI1IDkuNDIzNjggMTkuMyA2LjM1MDY2QzE5LjQ1IDMuMzUyNTggMTkuNDEyNSAyLjk0MDM0IDE4Ljg1IDIuOTQwMzRDMTguMzYyNSAyLjk0MDM0IDE4LjI1IDMuMzkwMDYgMTguMjUgNS43NTEwNEMxOC4yNSA4Ljg5OTAyIDE3LjggMTAuMTczMiAxNi40ODc1IDEwLjc3MjhDMTUuMDI1IDExLjQ0NzQgMTQuMTI1IDExLjI2IDEyLjk2MjUgMTAuMDk4MkMxMS45NSA5LjA0ODkyIDExLjg3NSA4LjgyNDA3IDExLjg3NSA1Ljk3NTlDMTEuODc1IDMuNTM5OTYgMTEuNzYyNSAyLjk0MDM0IDExLjMxMjUgMi45NDAzNEMxMC44NjI1IDIuOTQwMzQgMTAuNzUgMy40NjUwMSAxMC43NSA1LjU2MzY2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTIwLjEyNSA3LjQzNzQ2QzIwLjEyNSAxMS4xODUxIDIwLjIzNzUgMTEuOTM0NiAyMC42ODc1IDExLjkzNDZDMjEuMSAxMS45MzQ2IDIxLjI1IDExLjQ4NDkgMjEuMjUgMTAuMDYwOFY4LjE4Njk4SDIyLjkzNzVDMjQuNTg3NSA4LjE4Njk4IDI0LjY2MjUgOC4yNjE5MyAyNS42NzUgMTAuMDYwOEMyNi4yMzc1IDExLjA3MjYgMjYuOTEyNSAxMS45MzQ2IDI3LjE3NSAxMS45MzQ2QzI3LjgxMjUgMTEuOTM0NiAyNy43NzUgMTEuNzQ3MiAyNi42NSA5LjgzNTkyTDI1LjY3NSA4LjE4Njk4TDI2LjQ2MjUgNy41MTI0MUMyNy43Mzc1IDYuNDI1NjEgMjcuODUgNS4wMDE1MiAyNi43MjUgMy45MTQ3MkMyNS45IDMuMDUyNzcgMjUuNDg3NSAyLjk0MDM0IDIyLjkzNzUgMi45NDAzNEgyMC4xMjVWNy40Mzc0NlpNMjUuNjc1IDQuMjg5NDhDMjYuNTc1IDQuOTI2NTcgMjYuNzYyNSA1LjkwMDk0IDI2LjA1IDYuNjEyOTlDMjUuNzg3NSA2Ljg3NTMyIDI0LjYyNSA3LjA2MjcgMjMuNDI1IDcuMDYyN0gyMS4yNVY1LjM3NjI4VjMuNjg5ODZIMjMuMDVDMjQuMDYyNSAzLjY4OTg2IDI1LjE4NzUgMy45NTIyIDI1LjY3NSA0LjI4OTQ4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTMwLjQzNzYgNy4xMzc1OEMyOS40MjUxIDkuNDIzNjEgMjguNTI1MSAxMS40NDczIDI4LjQ1MDEgMTEuNjM0N0MyOC4zNzUxIDExLjc4NDYgMjguNTYyNiAxMS45MzQ1IDI4Ljg2MjYgMTEuOTM0NUMyOS4xNjI2IDExLjkzNDUgMjkuNjEyNiAxMS40NDczIDI5Ljg3NTEgMTAuODEwMkMzMC4zMjUxIDkuNzIzNDIgMzAuNDAwMSA5LjY4NTk0IDMyLjg3NTEgOS42ODU5NEMzNS4zNTAxIDkuNjg1OTQgMzUuNDI1MSA5LjcyMzQyIDM1Ljg3NTEgMTAuODEwMkMzNi4xMzc2IDExLjQ0NzMgMzYuNTg3NiAxMS45MzQ1IDM2Ljg4NzYgMTEuOTM0NUMzNy41MjUxIDExLjkzNDUgMzcuNjM3NiAxMi4zMDkzIDM1LjMxMjYgNy4xMDAxQzM0LjE1MDEgNC41MTQyNyAzMy4yMTI2IDIuOTQwMjggMzIuODc1MSAyLjk0MDI4QzMyLjUzNzYgMi45NDAyOCAzMS42MDAxIDQuNTE0MjcgMzAuNDM3NiA3LjEzNzU4Wk0zMy45MjUxIDYuNDI1NTRDMzQuMzc1MSA3LjUxMjM0IDM0Ljc1MDEgOC41MjQxOSAzNC43NTAxIDguNjc0MDlDMzQuNzUwMSA4LjgyNCAzMy45MjUxIDguOTM2NDMgMzIuODc1MSA4LjkzNjQzQzMxLjg2MjYgOC45MzY0MyAzMS4wMDAxIDguODI0IDMxLjAwMDEgOC42NzQwOUMzMS4wMDAxIDguMTQ5NDMgMzIuNjUwMSA0LjQzOTMxIDMyLjg3NTEgNC40MzkzMUMzMi45ODc2IDQuNDM5MzEgMzMuNDc1MSA1LjMzODc0IDMzLjkyNTEgNi40MjU1NFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo="})),g().createElement(I.xu,null,g().createElement(I.kC,{h:32,justifyContent:"space-between",alignItems:"center",bg:"#FFA654",padding:"0px 25px 0px 25px",borderTopRightRadius:8,borderTopLeftRadius:8},g().createElement(g().Fragment,null,g().createElement("select",{onChange:function(e){w(e.target.value)},style:{background:"#FFF500",border:0,borderRadius:10,padding:3,outline:"none"}},g().createElement("option",{value:6},"Last week"),g().createElement("option",{value:14},"Last 15 days"),g().createElement("option",{value:28},"Last Month"),g().createElement("option",{value:89},"Last 3 Months")))),g().createElement(I.xu,{height:200,style:{background:"rgba(251, 242, 242, 0.3)",borderBottomLeftRadius:8,borderBottomRightRadius:8,paddingTop:10}},g().createElement(I.kC,{width:"100%",justifyContent:"center",style:{paddingRight:55,paddingLeft:55}},g().createElement(I.xu,{width:77,height:75,bg:"rgba(118, 110, 86, 0.44)",style:{display:"flex",flexDirection:"column",alignItems:"center",borderRadius:8,position:"relative"}},g().createElement(I.xv,{as:"b",fontSize:48,color:"#FFF500",lineHeight:1.1},isNaN(Q)?"-":Q),g().createElement(I.xv,{fontSize:12,color:"white",position:"absolute",bottom:"5px"},"AVG SCORE"))),g().createElement(s.h,{width:"100%",height:"65%"},g().createElement(y.w,{data:S,margin:{top:10,right:25,left:-15,bottom:0},style:{cursor:"pointer"}},g().createElement(A.u,{cursor:{fill:"transparent"},contentStyle:{background:"rgba(0, 0, 0, 0.5)",padding:5,border:0,borderRadius:8},itemStyle:{fontSize:12},formatter:function(e){return M=(t=e)%60,Math.floor(t/60)+"h "+Math.floor(M)+"m";var t,M}}),g().createElement(l.x,{name:"Inactive",type:"monotoneX",dataKey:"inactive",stroke:"#FFE9D5",strokeWidth:2,activeDot:{r:2},dot:{stroke:"#FFE9D5",strokeWidth:1,r:2}}),g().createElement(l.x,{name:"Low Activity",type:"monotoneX",dataKey:"low",stroke:"#F8F043",strokeWidth:2,activeDot:{r:2},dot:{stroke:"#F8F043",strokeWidth:1,r:2}}),g().createElement(l.x,{name:"Medium Activity",type:"monotoneX",dataKey:"medium",stroke:"#FFA654",strokeWidth:2,activeDot:{r:2},dot:{stroke:"#FFA654",strokeWidth:1,r:2}}),g().createElement(l.x,{name:"High Activity",type:"monotoneX",dataKey:"high",stroke:"#FF5977",strokeWidth:2,activeDot:{r:2},dot:{stroke:"#FF5977",strokeWidth:1,r:2}}),g().createElement(L.K,{dataKey:"summary_date",tickLine:!1,fontSize:8,stroke:"white"}),g().createElement(d.B,{axisLine:!1,tickLine:!1,label:{value:"HOURS",angle:-90,stroke:"white",fontSize:8},stroke:"white",fontSize:10,tickFormatter:function(e){return Math.floor(e/60)},domain:[0,"dataMax +60"]}))))))};E.displayName="OuraEffort";const x=E;var m=M(953),S=document.getElementById("root");(0,m.createRoot)(S).render(g().createElement(x,null))}}]);