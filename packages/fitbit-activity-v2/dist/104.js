"use strict";(self.webpackChunk_prifina_widgets_fitbit_activity_v2=self.webpackChunk_prifina_widgets_fitbit_activity_v2||[]).push([[104],{3104:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var a=n(1119),r=n(6470),c=n(513),o=n(7162),i=n.n(o),s=(n(3108),n(8188),n(1657),n(3105),n(1245),n(9120),n(5713),n(7900)),l=n.n(s),d=n(4149),u=n(2734),p=n(2230),m=n(4565),f=n(4033),g=n(8703),h=n(8445),E=n(6656),b=n(4705),y=n(7284),v=n(3258),w=n(4912),x=n(5484),k=n(5556),C=n(3131),S=n(2655),D=n(2418),A=d.ZP.div.withConfig({displayName:"App__Container",componentId:"sc-1ywd52f-0"})(["height:300px;width:300px;border-radius:10px;background:linear-gradient( 180deg,#082673 30.67%,#644bd0 75.51%,#a56adf 106.47% );padding:11px 8px 0px 8px;"]),Z=function(e){var t=(0,u.usePrifina)(),n=(t.stage,t.check,t.onUpdate),o=t.API,d=t.registerDataConnector,Z=(0,s.useState)([]),R=(0,c.Z)(Z,2),O=R[0],_=R[1],I=(0,s.useState)(),F=(0,c.Z)(I,2),T=F[0],P=F[1],z=(0,s.useState)(),L=(0,c.Z)(z,2),B=L[0],K=L[1],U=(0,s.useRef)(),j=function(e){console.log("ORIGINAL PROCESS DATA",e);var t=e;console.log("newData",t);var n=t.distances.reduce((function(e,t){return e+t.distance}),0);P(t),K(1e3*n.toFixed(4)),Object.assign(t,{distance:Number(1e3*n.toFixed(4))}),_([t])};console.log("processed display data",O),console.log("processed data",T);var q=function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("UPDATE ",t),t.hasOwnProperty("data")&&t.data.hasOwnProperty("content")&&console.log("PAYLOAD DATA",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=(0,s.useState)(1),$=(0,c.Z)(N,2),W=$[0],Y=$[1],G=(0,s.useState)(),X=(0,c.Z)(G,2),H=X[0],J=X[1];return(0,s.useEffect)((function(){function e(){return(e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(p.A,q),d(p.A,[m.Z]),U.current=!0;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}U.current||function(){e.apply(this,arguments)}()}),[]),(0,s.useEffect)((function(){function e(){return(e=(0,r.Z)(i().mark((function e(){var t,n,r,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,n=t.setDate(t.getDate()-W),r=new Date(n).toISOString().split("T")[0],J(r),console.log("datestr",r),c=(0,a.Z)({},"s3::date",(0,a.Z)({},u.Op.eq,r)),console.log("FILTER",c),e.next=9,o[p.A].Fitbit.queryActivitySummary({filter:c,fields:"caloriesOut,steps,distances"});case 9:s=e.sent,console.log("RESULT",s),j(s.data.getDataObject.content);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[W]),console.log("day",W),console.log("day",O),l().createElement(A,null,l().createElement(f.kC,{alignItems:"center",mb:21},l().createElement(f.xv,{fontSize:16,color:"white",fontWeight:700,ml:9,mr:95},"Activity widget"),l().createElement(g.Ee,{src:b.Z})),l().createElement(f.xu,null,l().createElement(f.kC,{h:32,justifyContent:"space-between",alignItems:"center",bg:"#D4D7F2CC",padding:"0px 65px 0px 65px",borderTopRightRadius:8,borderTopLeftRadius:8},l().createElement(h.hU,{style:{background:"transparent",border:0,cursor:"pointer",fontSize:19},"aria-label":"Search database",icon:l().createElement(E.wy,null),onClick:(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y(W+1);case 1:case"end":return e.stop()}}),e)})))}),l().createElement(f.xv,null,H),l().createElement(h.hU,{disabled:1===W,style:{background:"transparent",border:0,cursor:"pointer",fontSize:19},"aria-label":"Search database",icon:l().createElement(E.XC,null),onClick:(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y(W-1);case 1:case"end":return e.stop()}}),e)})))})),l().createElement(f.xu,{height:190,style:{background:"rgba(251, 242, 242, 0.3)",borderBottomLeftRadius:8,borderBottomRightRadius:8,paddingTop:10}},l().createElement(f.kC,{width:"100%",justifyContent:"space-between",style:{paddingRight:55,paddingLeft:55}},l().createElement(f.kC,{alignItems:"center"},l().createElement(y.Yq,{color:"#222671"}),l().createElement(f.xv,{ml:3,color:"#222671"},void 0===T?0:T.caloriesOut)),l().createElement(f.kC,{alignItems:"center"},l().createElement(y.W9,{color:"#DDB7F4"}),l().createElement(f.xv,{ml:3,color:"#DDB7F4"},void 0===T?0:T.steps)),l().createElement(f.kC,{alignItems:"center"},l().createElement(y.hu,{color:"#2A2E9C"}),l().createElement(f.xv,{ml:3,color:"#2A2E9C"},void 0===T?0:B))),l().createElement(v.h,{width:"100%",height:"100%"},l().createElement(w.v,{style:{cursor:"pointer"},data:O,margin:{top:5,right:0,left:0,bottom:30}},l().createElement(x.q,{strokeDasharray:"none",stroke:"null"}),l().createElement(k.K,{hide:!0,dataKey:"name"}),l().createElement(C.B,{hide:!0}),l().createElement(S.u,{cursor:{fill:"transparent"},contentStyle:{background:"rgba(255, 255, 255, 0.9)",padding:5,border:0,borderRadius:8},itemStyle:{fontSize:14}}),l().createElement(D.$,{barSize:45,name:"Calories",dataKey:"caloriesOut",fill:"#222671"}),l().createElement(D.$,{barSize:45,name:"Steps",dataKey:"steps",fill:"#DDB7F4"}),l().createElement(D.$,{barSize:45,name:"Distance (m)",dataKey:"distance",fill:"#2A2E9C"}))))))};Z.displayName="FitbitActivity";const R=Z}}]);