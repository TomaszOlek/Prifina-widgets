"use strict";(self.webpackChunk_prifina_widgets_oura_heart_v2=self.webpackChunk_prifina_widgets_oura_heart_v2||[]).push([[104],{9044:(M,e,t)=>{t.d(e,{Z:()=>N}),t(7900);const N="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTc0IiBoZWlnaHQ9IjE5NSIgdmlld0JveD0iMCAwIDE3NCAyMTkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0yMjYuMTk5IDI0LjE3NjFDMjE5LjM0NyAxNi41OTE0IDIxMS4xOTkgMTAuNTcwMSAyMDIuMjIyIDYuNDU4NDZDMTkzLjI0NSAyLjM0Njg0IDE4My42MTggMC4yMjU5NjQgMTczLjg5MyAwLjIxNzc3M0MxNTUuNDk5IDAuMjIxMDc4IDEzNy43NzYgNy44MTYwNSAxMjQuMjM0IDIxLjQ5ODlDMTEwLjY5NCA3LjgxMzc1IDkyLjk3MDMgMC4yMTg0MDkgNzQuNTc1NSAwLjIxNzc3M0M2NC44Mzk0IDAuMjI4OTE1IDU1LjIwMTMgMi4zNTYyNiA0Ni4yMTYgNi40NzczOUMzNy4yMzA3IDEwLjU5ODUgMjkuMDc1NiAxNi42MzIgMjIuMjE5OSAyNC4yMzA4Qy03LjAyMTE2IDU2LjUwNzYgLTcuMDA4NzQgMTA2Ljk5MiAyMi4yNDQ4IDEzOS4xMzNMMTI0LjIzNCAyNTEuMjM0TDIyNi4yMjQgMTM5LjEzM0MyNTUuNDc4IDEwNi45OTIgMjU1LjQ5IDU2LjUwNzYgMjI2LjE5OSAyNC4xNzYxWiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC4xIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6b3ZlcmxheSIvPgo8L3N2Zz4K"},5289:(M,e,t)=>{t.d(e,{Z:()=>N}),t(7900);const N="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAzOCAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIuODc1IDEuMjU0MjdDMi44NzUgMS43MDM5OCAzLjQgMS44MTY0MSA1LjMxMjUgMS44MTY0MUM3LjIyNSAxLjgxNjQxIDcuNzUgMS43MDM5OCA3Ljc1IDEuMjU0MjdDNy43NSAwLjgwNDU1NiA3LjIyNSAwLjY5MjEyOCA1LjMxMjUgMC42OTIxMjhDMy40IDAuNjkyMTI4IDIuODc1IDAuODA0NTU2IDIuODc1IDEuMjU0MjdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMi44MDAzNyAzLjUzOTc5Qy0wLjA4NzEzNDggNS4wNzYzMSAtMC4wMTIxMzQ4IDkuODczMjMgMi44NzUzNyAxMS4zNzIzQzQuMzAwMzcgMTIuMTIxOCA2Ljc3NTM3IDEyLjA4NDMgNy45NzUzNyAxMS4zMzQ4QzEwLjcxMjkgOS40OTg0NyAxMC42MDA0IDQuOTYzODggNy43NTAzNyAzLjUwMjMyQzYuMzYyODcgMi43OTAyNyA0LjExMjg3IDIuNzkwMjcgMi44MDAzNyAzLjUzOTc5Wk03LjAwMDM3IDQuMjUxODNDOC4zNTAzNyA0Ljk2Mzg4IDguODc1MzcgNS44NjMzIDguODc1MzcgNy41MTIyNEM4Ljg3NTM3IDkuMDg2MjMgOC4xMjUzNyAxMC4yMTA1IDYuNjYyODcgMTAuODEwMUM0LjMzNzg3IDExLjc0NyAxLjc1MDM3IDEwLjA2MDYgMS43NTAzNyA3LjYyNDY3QzEuNzUwMzcgNS45MDA3OCAyLjIzNzg3IDQuOTYzODggMy41NTAzNyA0LjI4OTMxQzQuODYyODcgMy41NzcyNyA1LjY1MDM3IDMuNTM5NzkgNy4wMDAzNyA0LjI1MTgzWiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTEwLjc1IDUuNTYzNjZDMTAuNzUgMTAuMDYwOCAxMi4wNjI1IDExLjkzNDYgMTUuMjUgMTEuOTM0NkMxNi42NzUgMTEuOTM0NiAxNy4xNjI1IDExLjc0NzIgMTguMDI1IDEwLjg0NzhDMTkgOS44MzU5MiAxOS4xMTI1IDkuNDIzNjggMTkuMyA2LjM1MDY2QzE5LjQ1IDMuMzUyNTggMTkuNDEyNSAyLjk0MDM0IDE4Ljg1IDIuOTQwMzRDMTguMzYyNSAyLjk0MDM0IDE4LjI1IDMuMzkwMDYgMTguMjUgNS43NTEwNEMxOC4yNSA4Ljg5OTAyIDE3LjggMTAuMTczMiAxNi40ODc1IDEwLjc3MjhDMTUuMDI1IDExLjQ0NzQgMTQuMTI1IDExLjI2IDEyLjk2MjUgMTAuMDk4MkMxMS45NSA5LjA0ODkyIDExLjg3NSA4LjgyNDA3IDExLjg3NSA1Ljk3NTlDMTEuODc1IDMuNTM5OTYgMTEuNzYyNSAyLjk0MDM0IDExLjMxMjUgMi45NDAzNEMxMC44NjI1IDIuOTQwMzQgMTAuNzUgMy40NjUwMSAxMC43NSA1LjU2MzY2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTIwLjEyNSA3LjQzNzQ2QzIwLjEyNSAxMS4xODUxIDIwLjIzNzUgMTEuOTM0NiAyMC42ODc1IDExLjkzNDZDMjEuMSAxMS45MzQ2IDIxLjI1IDExLjQ4NDkgMjEuMjUgMTAuMDYwOFY4LjE4Njk4SDIyLjkzNzVDMjQuNTg3NSA4LjE4Njk4IDI0LjY2MjUgOC4yNjE5MyAyNS42NzUgMTAuMDYwOEMyNi4yMzc1IDExLjA3MjYgMjYuOTEyNSAxMS45MzQ2IDI3LjE3NSAxMS45MzQ2QzI3LjgxMjUgMTEuOTM0NiAyNy43NzUgMTEuNzQ3MiAyNi42NSA5LjgzNTkyTDI1LjY3NSA4LjE4Njk4TDI2LjQ2MjUgNy41MTI0MUMyNy43Mzc1IDYuNDI1NjEgMjcuODUgNS4wMDE1MiAyNi43MjUgMy45MTQ3MkMyNS45IDMuMDUyNzcgMjUuNDg3NSAyLjk0MDM0IDIyLjkzNzUgMi45NDAzNEgyMC4xMjVWNy40Mzc0NlpNMjUuNjc1IDQuMjg5NDhDMjYuNTc1IDQuOTI2NTcgMjYuNzYyNSA1LjkwMDk0IDI2LjA1IDYuNjEyOTlDMjUuNzg3NSA2Ljg3NTMyIDI0LjYyNSA3LjA2MjcgMjMuNDI1IDcuMDYyN0gyMS4yNVY1LjM3NjI4VjMuNjg5ODZIMjMuMDVDMjQuMDYyNSAzLjY4OTg2IDI1LjE4NzUgMy45NTIyIDI1LjY3NSA0LjI4OTQ4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTMwLjQzNzYgNy4xMzc1OEMyOS40MjUxIDkuNDIzNjEgMjguNTI1MSAxMS40NDczIDI4LjQ1MDEgMTEuNjM0N0MyOC4zNzUxIDExLjc4NDYgMjguNTYyNiAxMS45MzQ1IDI4Ljg2MjYgMTEuOTM0NUMyOS4xNjI2IDExLjkzNDUgMjkuNjEyNiAxMS40NDczIDI5Ljg3NTEgMTAuODEwMkMzMC4zMjUxIDkuNzIzNDIgMzAuNDAwMSA5LjY4NTk0IDMyLjg3NTEgOS42ODU5NEMzNS4zNTAxIDkuNjg1OTQgMzUuNDI1MSA5LjcyMzQyIDM1Ljg3NTEgMTAuODEwMkMzNi4xMzc2IDExLjQ0NzMgMzYuNTg3NiAxMS45MzQ1IDM2Ljg4NzYgMTEuOTM0NUMzNy41MjUxIDExLjkzNDUgMzcuNjM3NiAxMi4zMDkzIDM1LjMxMjYgNy4xMDAxQzM0LjE1MDEgNC41MTQyNyAzMy4yMTI2IDIuOTQwMjggMzIuODc1MSAyLjk0MDI4QzMyLjUzNzYgMi45NDAyOCAzMS42MDAxIDQuNTE0MjcgMzAuNDM3NiA3LjEzNzU4Wk0zMy45MjUxIDYuNDI1NTRDMzQuMzc1MSA3LjUxMjM0IDM0Ljc1MDEgOC41MjQxOSAzNC43NTAxIDguNjc0MDlDMzQuNzUwMSA4LjgyNCAzMy45MjUxIDguOTM2NDMgMzIuODc1MSA4LjkzNjQzQzMxLjg2MjYgOC45MzY0MyAzMS4wMDAxIDguODI0IDMxLjAwMDEgOC42NzQwOUMzMS4wMDAxIDguMTQ5NDMgMzIuNjUwMSA0LjQzOTMxIDMyLjg3NTEgNC40MzkzMUMzMi45ODc2IDQuNDM5MzEgMzMuNDc1MSA1LjMzODc0IDMzLjkyNTEgNi40MjU1NFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo="},3104:(M,e,t)=>{t.r(e),t.d(e,{default:()=>l});var N=t(7900),D=t.n(N),g=t(4149),j=t(2734),I=t(2230),z=t(3280),a=t(6827),u=t(8703),i=t(5289),c=t(9044),n=t(3258),y=t(6641),A=t(2655),o=t(1573),L=t(5556),T=t(3131);const r=g.ZP.div`
  height: 300px;
  width: 300px;
  border-radius: 10px;
  background: linear-gradient(180deg, #343434 0%, #d3bc69 149.83%);
  padding: 11px 8px 0px 8px;
`,s=M=>{const{stage:e,check:t,onUpdate:g,API:s,registerDataConnector:l}=(0,j.usePrifina)(),[E,x]=(0,N.useState)([]),[d,S]=(0,N.useState)(6),[O,w]=(0,N.useState)(),U=(0,N.useRef)(),k=M=>{console.log("ORIGINAL PROCESS ASYNC DATA",M);let t=M;const N="summary_date,hr_lowest".split(",");let D=[];if("dev"===e){const M=t[0].split(","),e=t[1].split(","),g=[];N.forEach((t=>{const N=M.indexOf(t);N>-1&&g.push(e[N])}));const j={summary_date:g[0],hr_lowest:parseInt(g[1])};let I=new Date(j.summary_date);D.push(j);for(let M=0;M<d;M++){const M=I.setDate(I.getDate()-1);let e=Object.assign({},j);e.summary_date=new Date(M).toISOString().split("T")[0],D.push(e),I=new Date(M)}console.log("new data",D)}else t.shift(),t.forEach((M=>{const e=M.split(",");D.push({[N[0]]:e[0],[N[1]]:Number(e[1])})}));x(D),console.log("process result",D);let g=D.reduce(((M,e)=>M+e.hr_lowest/D.length),0);w(Math.ceil(g))};console.log("processed async data",E);const h=async M=>{console.log("UPDATE ",M),M.hasOwnProperty("data")&&M.data.hasOwnProperty("content")&&("Oura/querySleepDataAsync"===M.data.dataconnector&&M.data.content.length>1&&k(M.data.content),console.log("PAYLOAD DATA",M))};return(0,N.useEffect)((()=>{U.current||async function(){g(I.A,h),l(I.A,[z.Z]),U.current=!0}()}),[]),(0,N.useEffect)((()=>{!async function(){let M=new Date;const t=M.setDate(M.getDate()-d),N=[(D=new Date(t)).getFullYear(),(D.getMonth()+1).toString().padStart(2,"0"),D.getDate().toString().padStart(2,"0")].join("-");var D;const g={"s3::date":{[j.Op.gte]:N}};console.log("ASYNC FILTER",g);const z=await s[I.A].Oura.querySleepDataAsync({filter:g,fields:"summary_date,hr_lowest"});"dev"===e&&(console.log("async result",z),k(z.data.getDataObject.content))}()}),[d]),console.log("period",d),D().createElement(r,null,D().createElement(a.kC,{alignItems:"center",mb:21},D().createElement(a.xv,{fontSize:16,color:"white",fontWeight:700,ml:9,mr:110},"Heart widget"),D().createElement(u.Ee,{src:i.Z})),D().createElement(a.xu,null,D().createElement(a.kC,{h:32,justifyContent:"space-between",alignItems:"center",bg:"#FFA654",padding:"0px 25px 0px 25px",borderTopRightRadius:8,borderTopLeftRadius:8},D().createElement(D().Fragment,null,D().createElement("select",{onChange:M=>{S(M.target.value)},style:{background:"#FFF500",border:0,borderRadius:10,padding:3,outline:"none"}},D().createElement("option",{value:6},"Last week"),D().createElement("option",{value:14},"Last 15 days"),D().createElement("option",{value:28},"Last Month"),D().createElement("option",{value:89},"Last 3 Months"))),D().createElement(a.xu,{bg:"#FFF500",borderRadius:4,width:50,textAlign:"center"},"RHR")),D().createElement(a.xu,{height:200,style:{background:"rgba(251, 242, 242, 0.3)",borderBottomLeftRadius:8,borderBottomRightRadius:8,paddingTop:10,backgroundImage:`url(${c.Z})`,backgroundRepeat:"no-repeat",backgroundPosition:"right"}},D().createElement(a.kC,{width:"100%",justifyContent:"center",style:{paddingRight:55,paddingLeft:55}},D().createElement(a.xu,{width:71,height:75,bg:"rgba(118, 110, 86, 0.44)",style:{display:"flex",flexDirection:"column",alignItems:"center",borderRadius:8,position:"relative"}},D().createElement(a.xv,{as:"b",fontSize:48,color:"#FFF500",lineHeight:1.1},isNaN(O)?"-":O),D().createElement(a.xv,{fontSize:12,color:"white",position:"absolute",bottom:"5px"},"AVG RHR"))),D().createElement(n.h,{width:"100%",height:"65%"},D().createElement(y.w,{data:E,margin:{top:10,right:25,left:-15,bottom:0},style:{cursor:"pointer"}},D().createElement(A.u,{cursor:{fill:"transparent"},contentStyle:{background:"#FFA654",padding:5,border:0,borderRadius:8},itemStyle:{fontSize:12}}),D().createElement(o.x,{name:"Resting HR",type:"monotoneX",dataKey:"hr_lowest",stroke:"#FFF500",strokeWidth:2,activeDot:{r:2},dot:{stroke:"yellow",strokeWidth:1,r:2}}),D().createElement(L.K,{dataKey:"summary_date",tickLine:!1,fontSize:8,stroke:"white"}),D().createElement(T.B,{axisLine:!1,tickLine:!1,label:{value:"RESTING HR",angle:-90,stroke:"white",fontSize:10},stroke:"white",fontSize:10}))))))};s.displayName="OuraHeart";const l=s},2230:(M,e,t)=>{t.d(e,{A:()=>N});const N="nsEjj21WhsSAhPigePiLSY"}}]);